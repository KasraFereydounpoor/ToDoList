
{% extends 'app_todo/base.html' %}

{% include 'app_todo/dashboard_sidebar.html' %}

{% load static %}



{% block title %}لیست کارها{% endblock %}

{% block content %}

    <!-- فرم سرچ و فیلتر -->
<form method="get" class="d-flex flex-wrap align-items-center justify-content-center mb-4 gap-2">
    <input type="text" name="search" class="form-control w-50" placeholder="جستجو عنوان" value="{{ request.GET.search }}">
    <select name="order" class="form-select w-30">
        <option  value="">ترتیب پیش‌فرض</option>
        <option value="completed">انجام‌شده اول</option>
        <option value="not_completed">انجام‌نشده اول</option>
    </select>
    <button class="btn btn-info w-50" type="submit">اعمال</button>
</form>

    <h1 class="mb-4 text-center">لیست کارها</h1>
    <a href="{% url 'task_create' %}" class="btn btn-primary mb-3 mx-auto d-block" style="width:180px;">افزودن کار جدید</a>
<ul class="list-group w-75 mx-auto text-center">
    {% for task in tasks %}
        <li class="list-group-item">
            <div class="d-flex justify-content-between align-items-center">
                <span>{{ task.title }}</span>
                <div>
                    <a href="{% url 'task_update' task.id %}" class="btn btn-warning btn-sm mx-1">ویرایش</a>
                    <a href="{% url 'task_delete' task.id %}" class="btn btn-danger btn-sm mx-1">حذف</a>
                </div>
            </div>
            {% if task.attachment %}
                <a href="{{ task.attachment.url }}" target="_blank" class="btn btn-info btn-sm mt-2">دانلود فایل</a>
            {% endif %}
        </li>
    {% empty %}
        <li class="list-group-item">هیچ دیتایی ثبت نشده.</li>
    {% endfor %}
</ul>

{% endblock %}
